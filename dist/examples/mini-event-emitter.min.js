var MiniEventEmitter;MiniEventEmitter=function(){function g(b){this.settings={error:(null!=b?b.error:void 0)||!1,trace:(null!=b?b.trace:void 0)||!1,worker:(null!=b?b.worker:void 0)||null},this.events={},this.groups={},this.settings.worker&&(this.worker=webworkify(this.settings.worker),this.worker.addEventListener("message",function(b){return function(c){var d;return d=c.data,a({self:b,args:d.args,event:d.event,internal:!0})}}(this)))}var a,b,c,d,e,f;return g.prototype.on=function(a,e,g){var h;return h=f(e,g),e=h[0],g=h[1],d(a)?d(e)?c(g)?(this.groups[e]?this.groups[e][a]?this.groups[e][a].push(g):this.groups[e][a]=[g]:(this.groups[e]={},this.groups[e][a]=[g]),this.events[a]?this.events[a].push(g):this.events[a]=[g],this):b(this,"on",6,a,e):b(this,"on",5):b(this,"on",1)},g.prototype.off=function(a,g,h){var i,j,k,l,m,n;if(n=function(b){return function(){var c,d,e,f;for(d=0,f=i.length;f>d;d++)c=i[d],e=b.events[a].indexOf(c),b.events[a].splice(e,1);return 0===b.events[a].length?delete b.events[a]:void 0}}(this),l=f(g,h),g=l[0],h=l[1],a&&!d(a))return b(this,"off",1);if(!d(g))return b(this,"off",5);if(h&&!c(h))return b(this,"off",6,a,g);if(a&&!this.groups[g])return b(this,"off",7,a,g);if(!a){m=this.groups[g];for(a in m)i=m[a],n();return delete this.groups[g],this}return(i=this.groups[g][a])?h?-1===(j=i.indexOf(h))?b(this,"off",2,a,g):(i.splice(j,1),0===i.length&&delete this.groups[g][a],0===e(this.groups[g])&&delete this.groups[g],k=this.events[a].indexOf(h),this.events[a].splice(k,1),0===this.events[a].length&&delete this.events[a],this):(n(),delete this.groups[g][a],0===e(this.groups[g])&&delete this.groups[g],this):b(this,"off",4,a,g)},g.prototype.emit=function(){var b,c;return b=Array.from(arguments),c=b.shift(),a({self:this,args:b,event:c,internal:!1})},g.prototype.trigger=function(){return this.emit.apply(this,arguments),this},d=function(a){return"string"==typeof a||a instanceof String},e=function(a){return Object.keys(a).length},c=function(a){return"function"==typeof a},b=function(a,b,c,d,e){var f;return a.settings.error?(f="MiniEventEmitter ~ "+b+" ~ ",1===c&&(f+="Event name must be a string"),2===c&&(f+='Provided function to remove with event "'+d+'" in group "'+e+'" is not found'),3===c&&(f+="Event was not provided"),4===c&&(f+='Event "'+d+'" does not exist'),5===c&&(f+="Provided group must be a string"),6===c&&(f+='The last param provided with event "'+d+'" and group "'+e+'" is expected to be a function'),7===c&&(f+='Provided Group "'+e+"\" doesn't have any events"),console.warn?console.warn(f):console.log(f),a):a},f=function(a,b){return null==b&&c(a)?(b=a,a=""):a||(a=""),[a,b]},a=function(a){var c,e,f,g,h,i,j,k,l;if(l=a.self,f=a.event,e=a.args,h=a.internal,!f)return b(l,"emit",3);if(!d(f))return b(l,"emit",1);if(!(j=l.events[f]))return b(l,"emit",4,f);if(l.settings.worker&&!h)l.worker.postMessage({args:e,event:f});else for(l.settings.trace&&(k="MiniEventEmitter ~ trace ~ "+f,console.debug?console.debug(k):console.log(k)),g=0,i=j.length;i>g;g++)c=j[g],c.apply(c,e);return l},g}(),window.MiniEventEmitter=MiniEventEmitter;
