!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d,e,f,g=function(a,b){function d(){this.constructor=a}for(var c in b)h.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},h={}.hasOwnProperty;e=a("./handler"),f=function(a){return console.warn?console.warn(a):console.log(a)},("undefined"==typeof MiniEventEmitter||null===MiniEventEmitter)&&f("Dragify ~ Dragify depends on the MiniEventEmitter.\nhttps://github.com/hawkerboy7/mini-event-emitter\nDefine it before Dragify"),d=function(a){function b(a,c){var d,g,h,i;return this.containers=a,b.__super__.constructor.apply(this,arguments),c?(this.containers&&this.containers.constructor===Array||(this.containers=[]),c.containers&&(this.containers=this.containers.concat(c.containers))):this.containers&&this.containers.constructor===Object?(c=this.containers,this.containers=[]):this.containers&&this.containers.constructor===Array?c={}:(this.containers=[],c={}),0===this.containers.length&&null==c.isContainer?f("Dragify ~ You provided neither the `options.containers` nor the 'isContainer` function. At least one is required."):(this.options={threshold:{x:3,y:3},transition:!0,isContainer:function(a){return!1}},null!=c.transition&&(this.options.transition=c.transition),null!=(h=null!=(d=c.threshold)?d.x:void 0)&&(this.options.threshold.x=h),null!=(i=null!=(g=c.threshold)?g.y:void 0)&&(this.options.threshold.y=i),null!=c.isContainer&&(this.options.isContainer=c.isContainer),void new e(this))}return g(b,a),b}(MiniEventEmitter),window.Dragify=d},{"./handler":3}],2:[function(a,b,c){var d;d=function(){function a(a){var b;this.dragify=a,this.block=!(null!=(b=this.dragify.options)?b.error:void 0)}return a.prototype.error=function(a){var b;if(!this.block)return b="Dragify ~ ",1.1===a&&(b+="First argument 'Containers' must be an array"),1.2===a&&(b+="'isContainer' must be a function"),2.1===a&&(b+="Dragify was unable to find the correct offset, please report an issue on https://github.com/hawkerboy7/dragify/issues/new. Please provide an example in which this error occurs"),console.warn?console.warn(b):console.log(b)},a}(),b.exports=d},{}],3:[function(a,b,c){var d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};d=a("./error"),e=function(){function a(a){this.dragify=a,this.mousemove=f(this.mousemove,this),this.mousedown=f(this.mousedown,this),this.mouseup=f(this.mouseup,this),this.load(),this.setup(),this.listeners()}return a.prototype.load=function(){return this.error=new d({dragify:this.dragify}).error},a.prototype.setup=function(){return this.dragify.containers||(this.dragify.containers=[]),this.dragify.containers.constructor!==Array?this.error(1.1):(this.setData(),this.create())},a.prototype.setData=function(){return this.data={index:null,start:{},offset:{},source:null,parent:null,treshhold:{}},this.previous={}},a.prototype.listeners=function(){return window.addEventListener("mouseup",this.mouseup),window.addEventListener("mousedown",this.mousedown)},a.prototype.mouseup=function(a){return 0===a.button?(window.removeEventListener("mousemove",this.mousemove),this.active?this.reset():void 0):void 0},a.prototype.mousedown=function(a){var b,c,d,e;if(0===a.button&&(this.node=this.validMousedown(a.target)))return this.data.source=this.node.parentNode,this.data.index=this.getIndex(this.node),this.data.start.x=a.clientX,this.data.start.y=a.clientY,d=a.offsetX,e=a.offsetY,c=!1,(b=function(a){return function(c){return c!==a.node?(d+=c.offsetLeft,e+=c.offsetTop,c.parentNode?b(c.parentNode):!0):void 0}}(this))(a.target)?this.error(2.1):(this.data.offset={x:d,y:e},window.addEventListener("mousemove",this.mousemove))},a.prototype.validMousedown=function(a){var b,c;return b=function(a){return function(b){var c,d;try{return a.validContainer(b)}catch(d){return c=d,!1}}}(this),(c=function(a){return function(a){return b(a.parentNode)?a:a.parentNode?c(a.parentNode):!1}}(this))(a)},a.prototype.validContainer=function(a){return a&&a!==document?-1!==this.dragify.containers.indexOf(a)||this.dragify.options.isContainer(a):!1},a.prototype.getIndex=function(a){var b,c,d,e,f;for(f=a.parentNode.childNodes,d=c=0,e=f.length;e>c;d=++c)if(b=f[d],b===a)return d;return null},a.prototype.mousemove=function(a){if(this.e=a,this.e.preventDefault(),this.e.X=this.e.clientX,this.e.Y=this.e.clientY,!this.active){if(Math.abs(this.e.X-this.data.start.x)>this.dragify.options.threshold.x&&(this.active=!0),Math.abs(this.e.Y-this.data.start.y)>this.dragify.options.threshold.y&&(this.active=!0),!this.active)return;this.set()}return this.active?this.position():void 0},a.prototype.position=function(){var a;return this.mirror.style.transform="translate("+(this.e.X-this.data.offset.x)+"px,"+(this.e.Y-this.data.offset.y)+"px)",a=document.elementFromPoint(this.e.X,this.e.Y),a&&a===this.previous.target||(this.previous.target=a,!(a=this.validParent(a))||a===this.previous.valid||this.node===a)?void 0:(this.previous.valid=a,this["switch"](a))},a.prototype.validParent=function(a){var b,c;if(a)return c=!1,this.validContainer(a)&&(c=a),b=function(a){return function(d){return a.validContainer(d.parentNode)?c=d:d.parentNode?b(d.parentNode):void 0}}(this),c||b(a),c},a.prototype["switch"]=function(a){return this.target=a,this.validContainer(this.target)?void(this.node.parentNode!==this.target&&this.transfer()):this.target.parentNode!==this.node.parentNode||this.getIndex(this.node)>this.getIndex(this.target)?this.insert(this.target.parentNode,this.node,this.target):this.insert(this.target.parentNode,this.node,this.target.nextSibling)},a.prototype.insert=function(a,b,c){var d;return a.insertBefore(b,c),d=this.target!==a?this.target:void 0,this.dragify.emit("move",this.node,this.node.parentNode,this.data.source,d)},a.prototype.transfer=function(){var a,b,c,d,e,f,g,h,i,j,k;for(g=null,h=this.target.childNodes,d=c=0,e=h.length;e>c;d=++c)b=h[d],i=this.distance({top:b.offsetTop,bottom:b.offsetTop+b.clientHeight}),k=i[0],f=i[1],(!g||g>k)&&(g=k,j=b,a=f);return this.target.childNodes[this.target.childNodes.length-1]===j&&a&&(j=null),this.insert(this.target,this.node,j)},a.prototype.distance=function(a){var b,c,d,e;return b=!1,e=this.e.offsetY,d=Math.abs(e-a.top),d>(c=Math.abs(e-a.bottom))&&(d=c),[d,e>a.bottom]},a.prototype.create=function(){return this.mirror=document.createElement("div"),this.mirror.tabIndex=0,this.mirror.className="dragify--mirror"},a.prototype.set=function(){var a;return this.previous.valid=this.node.parentNode,this.dragify.emit("drag",this.node,this.node.parentNode),this.mirror.appendChild(a=this.node.cloneNode(!0)),a.style.width=this.node.offsetWidth+"px",a.style.height=this.node.offsetHeight+"px",document.body.appendChild(this.mirror),this.mirror.focus(),this.addClass(document.body,"dragify--body"),this.dragify.options.transition&&this.addClass(this.node,"dragify--transition"),this.addClass(this.node,"dragify--opaque")},a.prototype.reset=function(){var a;for(this.active=!1;this.mirror.firstChild;)this.mirror.removeChild(this.mirror.firstChild);return document.body.removeChild(this.mirror),this.mirror.removeAttribute("style"),this.removeClass(document.body,"dragify--body"),this.removeClass(this.node,"dragify--opaque"),a=function(a){return function(b){return setTimeout(function(){return a.removeClass(b,"dragify--transition")},500)}}(this),this.dragify.options.transition&&a(this.node),this.data.source===this.node.parentNode&&this.data.index===this.getIndex(this.node)?this.dragify.emit("cancel",this.node,this.node.parentNode):this.dragify.emit("drop",this.node,this.node.parentNode,this.data.source),this.dragify.emit("end",this.node),this.node=null,this.target=null,this.setData()},a.prototype.addClass=function(a,b){var c;return c=[],a.className&&(c=a.className.split(" ")),c.push(b),a.className=c.join(" ")},a.prototype.removeClass=function(a,b){var c;return c=a.className.split(" "),c.splice(c.indexOf(b),1),0===c.length?a.removeAttribute("class"):a.className=c.join(" ")},a}(),b.exports=e},{"./error":2}]},{},[1]);
